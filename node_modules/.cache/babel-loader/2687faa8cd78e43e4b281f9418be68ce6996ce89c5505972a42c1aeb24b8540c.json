{"ast":null,"code":"import _regeneratorRuntime from\"D:/dotnetreact-loanapp/reactapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/dotnetreact-loanapp/reactapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/dotnetreact-loanapp/reactapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AppliedLoansPage=function AppliedLoansPage(){var navigate=useNavigate();//fetch the userId from the localstorage\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),showDeletePopup=_useState2[0],setShowDeletePopup=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),loanToDelete=_useState4[0],setLoanToDelete=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),appliedLoans=_useState6[0],setAppliedLoans=_useState6[1];useEffect(function(){fun();},[]);function fun(){return _fun.apply(this,arguments);}function _fun(){_fun=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://dotnetiamneo.azurewebsites.net/api/LoanApplication/GetLoanApplicationsByUserId?userId=\"+localStorage.getItem(\"userId\"));case 3:response=_context.sent;console.log(\"response in get Particular loan application\",response);if(response.status==200){setAppliedLoans(response.data);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setAppliedLoans([]);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return _fun.apply(this,arguments);}var handleDeleteClick=function handleDeleteClick(loan){setLoanToDelete(loan);setShowDeletePopup(true);};function handleConfirmDelete(){return _handleConfirmDelete.apply(this,arguments);}function _handleConfirmDelete(){_handleConfirmDelete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!loanToDelete){_context2.next=7;break;}_context2.next=3;return axios.delete('https://dotnetiamneo.azurewebsites.net/api/LoanApplication/'+loanToDelete);case 3:response=_context2.sent;console.log(\"response in delete\",response);if(response.status==204){fun();}closeDeletePopup();case 7:case\"end\":return _context2.stop();}},_callee2);}));return _handleConfirmDelete.apply(this,arguments);};var closeDeletePopup=function closeDeletePopup(){setLoanToDelete(null);setShowDeletePopup(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){navigate(\"/availableloan\");},children:\" Back\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Applied Loans\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Loan Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Submission Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),appliedLoans.length?/*#__PURE__*/_jsx(\"tbody\",{children:appliedLoans.map(function(loan){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:loan.loanType}),/*#__PURE__*/_jsx(\"td\",{children:new Date(loan.submissionDate).toISOString().split('T')[0]}),/*#__PURE__*/_jsx(\"td\",{children:loan.loanStatus==0?\"Pending\":loan.loanStatus==1?\"Approved\":\"Rejected\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){handleDeleteClick(loan.loanApplicationID);},children:\"Delete\"})]})]},loan.loanApplicationID);})}):\"No records Found\"]}),showDeletePopup&&/*#__PURE__*/_jsxs(\"div\",{className:\"delete-popup\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to delete?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleConfirmDelete,children:\"Yes, Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeDeletePopup,children:\"Cancel\"})]})]});};export default AppliedLoansPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","AppliedLoansPage","navigate","_useState","_useState2","_slicedToArray","showDeletePopup","setShowDeletePopup","_useState3","_useState4","loanToDelete","setLoanToDelete","_useState5","_useState6","appliedLoans","setAppliedLoans","fun","_fun","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","localStorage","getItem","sent","console","log","status","data","t0","stop","handleDeleteClick","loan","handleConfirmDelete","_handleConfirmDelete","_callee2","_callee2$","_context2","delete","closeDeletePopup","children","onClick","length","map","loanType","Date","submissionDate","toISOString","split","loanStatus","loanApplicationID","className"],"sources":["D:/dotnetreact-loanapp/reactapp/src/UserComponents/AppliedLoans.jsx"],"sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from \"axios\"\r\nconst AppliedLoansPage = () => {\r\n    const navigate = useNavigate();\r\n\r\n//fetch the userId from the localstorage\r\nconst [showDeletePopup, setShowDeletePopup] = useState(false);\r\n    const [loanToDelete, setLoanToDelete] = useState(null);\r\nconst [appliedLoans,setAppliedLoans]=useState([])\r\n\r\n\r\n\r\n\r\nuseEffect(()=>{\r\nfun()\r\n},[])\r\n\r\nasync function fun()\r\n{\r\ntry{\r\n    const response = await axios.get(\"https://dotnetiamneo.azurewebsites.net/api/LoanApplication/GetLoanApplicationsByUserId?userId=\"+localStorage.getItem(\"userId\"));\r\n    console.log(\"response in get Particular loan application\",response)\r\n  if (response.status == 200) {\r\n    setAppliedLoans(response.data)\r\n\r\n}}\r\ncatch{\r\n    setAppliedLoans([])\r\n\r\n}\r\n\r\n}\r\n\r\n\r\nconst handleDeleteClick = (loan) => {\r\n    setLoanToDelete(loan);\r\n    setShowDeletePopup(true);\r\n};\r\n\r\nasync function handleConfirmDelete(){\r\n    if (loanToDelete) {\r\n    const response = await axios.delete('https://dotnetiamneo.azurewebsites.net/api/LoanApplication/'+loanToDelete);\r\n    console.log(\"response in delete\",response)\r\n    if(response.status==204)\r\n    {\r\n        fun()\r\n\r\n    }\r\n    closeDeletePopup()\r\n    }\r\n};\r\n\r\nconst closeDeletePopup = () => {\r\n    setLoanToDelete(null);\r\n    setShowDeletePopup(false);\r\n};\r\n    return (\r\n        <div>\r\n\r\n            <button   onClick={()=>{\r\nnavigate(\"/availableloan\")\r\n            }}> Back</button>\r\n            <h1>Applied Loans</h1>\r\n\r\n            {/* Applied Loans Table */}\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Loan Name</th>\r\n                        <th>Submission Date</th>\r\n                        <th>Status</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n               {appliedLoans.length? <tbody>\r\n                    {appliedLoans.map((loan) => (\r\n                        <tr key={loan.loanApplicationID}>\r\n                            <td>{loan.loanType}</td>\r\n                            <td>{new Date(loan.submissionDate).toISOString().split('T')[0]}</td>\r\n                            <td>{loan.loanStatus==0?\"Pending\":(loan.loanStatus==1)?\"Approved\":\"Rejected\"}</td>\r\n                            <td> <button onClick={()=>{\r\n                                handleDeleteClick(loan.loanApplicationID)\r\n                            }}>Delete</button></td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>:\"No records Found\"}\r\n            </table>\r\n\r\n            {showDeletePopup && (\r\n                <div className=\"delete-popup\">\r\n                    <p>Are you sure you want to delete?</p>\r\n                    <button onClick={handleConfirmDelete}>Yes, Delete</button>\r\n                    <button onClick={closeDeletePopup}>Cancel</button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AppliedLoansPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}