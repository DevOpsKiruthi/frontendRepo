{"ast":null,"code":"import _regeneratorRuntime from\"D:/dotnetreact-loanapp/reactapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/dotnetreact-loanapp/reactapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/dotnetreact-loanapp/reactapp/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/dotnetreact-loanapp/reactapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/dotnetreact-loanapp/reactapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link}from'react-router-dom';import{useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState({username:'',password:''// Change the field name to \"password\"\n}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));validateField(name,value);};var validateField=function validateField(fieldName,value){var fieldErrors=_objectSpread({},errors);switch(fieldName){case'password':// Add password validation rules here if needed\nfieldErrors.password=value.length>=6?'':'Password must be at least 6 characters';break;default:break;}setErrors(fieldErrors);};function handleLogin(){return _handleLogin.apply(this,arguments);}function _handleLogin(){_handleLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var requestObject,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log('Login clicked');// Simulate a successful login by calling the login function\n// let role = \"user\"; // Set the default role to 'admin'\nif(!(formData.username.trim()===''||formData.password.trim()==='')){_context.next=4;break;}setErrors({username:formData.username.trim()===''?'Username is required':errors.username,password:formData.password.trim()===''?'Password is required':errors.password});return _context.abrupt(\"return\");case 4:_context.prev=4;// Create the request object with your data\nrequestObject={username:formData.username,password:formData.password};console.log('requestObject',requestObject);// Send a POST request using Axios with async/await\n_context.next=9;return axios.post('https://dotnetservereapp.azurewebsites.net/api/loan',requestObject);case 9:response=_context.sent;console.log(\"response\",response);// Handle the response herefv\n// If the login is successful, you can navigate to the desired page\nif(response.status==200){localStorage.setItem(\"role\",response.data.roles[0]);localStorage.setItem(\"userId\",response.data.userId);localStorage.setItem(\"userName\",response.data.username);localStorage.setItem(\"isAuthenticated\",\"true\");if(response.data.roles[0]==\"admin\"){navigate('/home');}else{navigate(\"/availableloan\");}}else{setError(\"Invalid Password or Email\");}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);// Handle any errors\nsetError(\"Invalid Password or Email\");case 17:case\"end\":return _context.stop();}},_callee,null,[[4,14]]);}));return _handleLogin.apply(this,arguments);};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:formData.username,onChange:handleChange,placeholder:\"Username\"}),errors.username&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errors.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,placeholder:\"Password\"}),errors.password&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errors.password})]}),error&&/*#__PURE__*/_jsx(\"span\",{id:\"login_error\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button\",onClick:handleLogin,children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup-link\",children:[\"Don't have an account?\",/*#__PURE__*/_jsx(Link,{to:\"/user/register\",children:\"Signup\"})]})]})]});}export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Login","navigate","_useState","_useState2","_slicedToArray","error","setError","_useState3","username","password","_useState4","formData","setFormData","_useState5","_useState6","errors","setErrors","handleChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","validateField","fieldName","fieldErrors","length","handleLogin","_handleLogin","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","requestObject","response","wrap","_callee$","_context","prev","next","console","log","trim","abrupt","post","sent","status","localStorage","setItem","data","roles","userId","t0","stop","className","children","type","onChange","placeholder","id","onClick","to"],"sources":["D:/dotnetreact-loanapp/reactapp/src/Components/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nfunction Login() {\r\n  const navigate = useNavigate();\r\nconst[error,setError]=useState(\"\")\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    password: '', // Change the field name to \"password\"\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n    validateField(name, value);\r\n  };\r\n\r\n  const validateField = (fieldName, value) => {\r\n\r\n    const fieldErrors = { ...errors };\r\n\r\n    switch (fieldName) {\r\n\r\n      case 'password':\r\n        // Add password validation rules here if needed\r\n        fieldErrors.password = value.length >= 6 ? '' : 'Password must be at least 6 characters';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    setErrors(fieldErrors);\r\n  };\r\n\r\n  async function handleLogin () {\r\n    console.log('Login clicked');\r\n    // Simulate a successful login by calling the login function\r\n\r\n    // let role = \"user\"; // Set the default role to 'admin'\r\n\r\n    if (formData.username.trim() === '' || formData.password.trim() === '') {\r\n      setErrors({\r\n        username: formData.username.trim() === '' ? 'Username is required' : errors.username,\r\n        password: formData.password.trim() === '' ? 'Password is required' : errors.password,\r\n      });\r\n      return\r\n    }\r\n\r\n      // If no errors, proceed with the Axios call\r\n  try {\r\n    // Create the request object with your data\r\n    let requestObject = {\r\n      username: formData.username,\r\n      password: formData.password,\r\n    };\r\n\r\n    console.log('requestObject', requestObject);\r\n\r\n    // Send a POST request using Axios with async/await\r\n    const response = await axios.post('https://dotnetservereapp.azurewebsites.net/api/loan',requestObject);\r\nconsole.log(\"response\",response)\r\n    // Handle the response herefv\r\n    // If the login is successful, you can navigate to the desired page\r\n    if (response.status==200) {\r\n      localStorage.setItem(\"role\",response.data.roles[0])\r\n      localStorage.setItem(\"userId\",response.data.userId)\r\n      localStorage.setItem(\"userName\",response.data.username)\r\n      localStorage.setItem(\"isAuthenticated\",\"true\")\r\n\r\n      if(response.data.roles[0]==\"admin\")\r\n      {\r\n        navigate('/home');\r\n      }\r\n      else{\r\n        navigate(\"/availableloan\")\r\n      }\r\n\r\n    }\r\n    else{\r\n      setError(\"Invalid Password or Email\")\r\n    }\r\n  } catch (error) {\r\n    // Handle any errors\r\n    setError(\"Invalid Password or Email\")\r\n\r\n  }\r\n\r\n\r\n};\r\n\r\n  return (\r\n    <div className=\"login-box\">\r\n      <h2>Login</h2>\r\n      <div className=\"login-form\">\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            value={formData.username}\r\n            onChange={handleChange}\r\n            placeholder=\"Username\"\r\n          />\r\n          {errors.username && <div className=\"error\">{errors.username}</div>}\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            placeholder=\"Password\"\r\n          />\r\n          {errors.password && <div className=\"error\">{errors.password}</div>}\r\n        </div>\r\n\r\n        {error&&<span id=\"login_error\">{error}</span>}\r\n        <button type=\"submit\" className=\"login-button\" onClick={handleLogin}>\r\n          Login\r\n        </button>\r\n        <div className=\"signup-link\">\r\n          Don't have an account?<Link to=\"/user/register\">Signup</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}