{"ast":null,"code":"import _regeneratorRuntime from\"D:/dotnetreact-loanapp/reactapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/dotnetreact-loanapp/reactapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/dotnetreact-loanapp/reactapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./Home.css';import{useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(){var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showDeletePopup=_useState2[0],setShowDeletePopup=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),loanToDelete=_useState4[0],setLoanToDelete=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),availableLoans=_useState6[0],setAvailableLoans=_useState6[1];// Sample data for available loans (you can replace this with actual data)\nuseEffect(function(){fun();},[]);function fun(){return _fun.apply(this,arguments);}function _fun(){_fun=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://dotnetiamneo.azurewebsites.net/api/Loan');case 2:response=_context.sent;console.log(\"response in getall\",response);setAvailableLoans(response.data);case 5:case\"end\":return _context.stop();}},_callee);}));return _fun.apply(this,arguments);}var handleDeleteClick=function handleDeleteClick(loan){setLoanToDelete(loan);setShowDeletePopup(true);};function handleConfirmDelete(){return _handleConfirmDelete.apply(this,arguments);}function _handleConfirmDelete(){_handleConfirmDelete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!loanToDelete){_context2.next=8;break;}_context2.next=4;return axios.delete('https://dotnetiamneo.azurewebsites.net/api/Loan/'+loanToDelete);case 4:response=_context2.sent;console.log(\"response in delete\",response);if(response.status==204){fun();}closeDeletePopup();case 8:_context2.next=12;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);case 12:case\"end\":return _context2.stop();}},_callee2,null,[[0,10]]);}));return _handleConfirmDelete.apply(this,arguments);};var closeDeletePopup=function closeDeletePopup(){setLoanToDelete(null);setShowDeletePopup(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{id:\"logoutbutton\",onClick:function onClick(){navigate(\"/user/login\");localStorage.clear();},children:\"Logout\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"loanHomeBody\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Vehicle Loan Application\"}),/*#__PURE__*/_jsx(\"button\",{id:\"req_button\",onClick:function onClick(){return navigate(\"/loanrequest\");},children:\"Loans Requested\"}),/*#__PURE__*/_jsx(\"button\",{id:\"new_button\",onClick:function onClick(){return navigate(\"/newloan\");},children:\"Create New\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"loan-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"LoanType\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Maximum Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Interest Rate\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),availableLoans.length?/*#__PURE__*/_jsx(\"tbody\",{children:availableLoans===null||availableLoans===void 0?void 0:availableLoans.map(function(loan){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:loan.loanType}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",loan.maximumAmount]}),/*#__PURE__*/_jsxs(\"td\",{children:[loan.interestRate,\"%\"]}),/*#__PURE__*/_jsx(\"td\",{children:loan.description}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate(\"/newloan/\"+loan.loanID);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDeleteClick(loan.loanID);},\"data-testid\":\"delete-button-\".concat(loan.loanID),children:\"Delete\"})]})]},loan.loanID);})}):\"No Records found\"]})]}),showDeletePopup&&/*#__PURE__*/_jsxs(\"div\",{className:\"delete-popup\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to delete?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleConfirmDelete,children:\"Yes, Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeDeletePopup,children:\"Cancel\"})]})]});};export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","HomePage","navigate","_useState","_useState2","_slicedToArray","showDeletePopup","setShowDeletePopup","_useState3","_useState4","loanToDelete","setLoanToDelete","_useState5","_useState6","availableLoans","setAvailableLoans","fun","_fun","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","console","log","data","stop","handleDeleteClick","loan","handleConfirmDelete","_handleConfirmDelete","_callee2","_callee2$","_context2","delete","status","closeDeletePopup","t0","children","id","onClick","localStorage","clear","className","length","map","loanType","maximumAmount","interestRate","description","loanID","concat"],"sources":["D:/dotnetreact-loanapp/reactapp/src/Components/Home.jsx"],"sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport './Home.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst HomePage = () => {\r\n    const navigate = useNavigate();\r\n    const [showDeletePopup, setShowDeletePopup] = useState(false);\r\n    const [loanToDelete, setLoanToDelete] = useState(null);\r\n    const[availableLoans, setAvailableLoans]=useState([])\r\n    // Sample data for available loans (you can replace this with actual data)\r\n    useEffect(()=>{\r\n        fun()\r\n    },[])\r\n    async function fun()\r\n    {\r\n        const response = await axios.get('https://dotnetiamneo.azurewebsites.net/api/Loan');\r\n        console.log(\"response in getall\",response)\r\n        setAvailableLoans(response.data)\r\n    }\r\n\r\n    const handleDeleteClick = (loan) => {\r\n        setLoanToDelete(loan);\r\n        setShowDeletePopup(true);\r\n    };\r\n\r\n    async function handleConfirmDelete(){\r\n       try{\r\n        if (loanToDelete) {\r\n            const response = await axios.delete('https://dotnetiamneo.azurewebsites.net/api/Loan/'+loanToDelete);\r\n            console.log(\"response in delete\",response)\r\n            if(response.status==204)\r\n            {\r\n                fun()\r\n\r\n            }\r\n            closeDeletePopup()\r\n            }\r\n       }catch{\r\n\r\n       }\r\n    };\r\n\r\n    const closeDeletePopup = () => {\r\n        setLoanToDelete(null);\r\n        setShowDeletePopup(false);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n\r\n            <button  id=\"logoutbutton\" onClick={()=>{\r\n                navigate(\"/user/login\");\r\n                localStorage.clear();\r\n            }}>Logout</button>\r\n            <div id=\"loanHomeBody\">\r\n                <h1>Vehicle Loan Application</h1>\r\n                <button id=\"req_button\" onClick={() => navigate(\"/loanrequest\")}>Loans Requested</button>\r\n                <button id=\"new_button\" onClick={() => navigate(\"/newloan\")}>Create New</button>\r\n\r\n                {/* Available Loans Table */}\r\n                <table className=\"loan-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>LoanType</th>\r\n                            <th>Maximum Amount</th>\r\n                            <th>Interest Rate</th>\r\n                            <th>Description</th>\r\n                            <th>Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                   {availableLoans.length?   <tbody>\r\n                        {availableLoans?.map((loan) => (\r\n                            <tr key={loan.loanID}>\r\n                                <td>{loan.loanType}</td>\r\n                                <td>${loan.maximumAmount}</td>\r\n                                <td>{loan.interestRate}%</td>\r\n                                <td>{loan.description}</td>\r\n                                <td>\r\n                                    <button onClick={() => navigate(\"/newloan/\"+loan.loanID)} >Edit</button>\r\n                                    <button onClick={() => handleDeleteClick(loan.loanID)}  data-testid={`delete-button-${loan.loanID}`}>Delete</button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>:\"No Records found\"}\r\n                </table>\r\n            </div>\r\n\r\n            {/* Delete Confirmation Popup */}\r\n            {showDeletePopup && (\r\n                <div className=\"delete-popup\">\r\n                    <p>Are you sure you want to delete?</p>\r\n                    <button onClick={handleConfirmDelete}>Yes, Delete</button>\r\n                    <button onClick={closeDeletePopup}>Cancel</button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HomePage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}